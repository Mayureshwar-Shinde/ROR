.container-fluid
  .row
    .col-md-10.offset-md-1.mx-auto
      .card.p-4{:style => "border-radius:10px; overflow-x: auto;"}
      
        %h3.card-header.display-6
          = @case.case_number

        .card-body
          %h4.card-title
            = @case.title
          %p.card-text{style: "font-size:15px"}
            = @case.description  

          %hr
          %ul.list-unstyled.display-6{style: "font-size:15px;"}
            %li 
              %strong.d-inline Status:
              = @case.status
            %li
              %strong Created by:
              = "#{@case.user.first_name} #{@case.user.last_name}"
            %li
              %strong Assigned to:
              = @case.assigned_to_id.nil? ? 'Unassigned' : "#{@case.assigned_to.first_name} #{@case.assigned_to.last_name}"
            %li
              %strong Created at:
              = @case.created_at.strftime("%B %d %Y, %l:%M%P")
            - if @case.status == 'Resolved'
              %li
                %strong Resolved at:
                = @case.updated_at.strftime("%B %d %Y, %l:%M%P")
            - else
              %li
                %strong Updated at:
                = @case.updated_at.strftime("%B %d %Y, %l:%M%P")

          %hr
          .button-group
            = link_to edit_dispute_analysts_case_path(@case), class: 'btn btn-success m-2' do
              %i.fa.fa-pen
              Edit
            = link_to dispute_analysts_case_notes_path(@case), class: "btn btn-info me-2" do
              %i.fa.fa-file
              Notes
            - unless @case.assigned_to_id.nil? || @case.status == 'closed'
              = button_tag class: "btn btn-primary m-2", "data-bs-toggle" => "modal", "data-bs-target" => "#exampleModal" do
                %i.fa.fa-calendar-plus.me-1
                Schedule Appointment
              = link_to dispute_analysts_case_appointments_path(@case), class: "btn btn-secondary m-2" do
                %i.fa.fa-calendar-alt
                Show all Appointments
              = link_to new_dispute_analysts_communication_path(message_type: 'email'), class: 'btn btn-warning m-2' do
                %i.fa.fa-envelope
                Send Email
              = link_to new_dispute_analysts_communication_path(message_type: 'sms'), class: 'btn btn-warning m-2' do
                %i.fa.fa-sms
                Send SMS
            = link_to dispute_analysts_communications_path, class: 'btn btn-dark m-2' do
              %i.fa.fa-history
              Show Communication Logs

- @appointment = Appointment.new
#exampleModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "exampleModalLabel", tabindex: "-1"}
  .modal-dialog
    .modal-content.p-4
      .modal-header
        %h1#exampleModalLabel.modal-title.fs-5 Schedule a New Appointment
        %button.btn-close{"aria-label" => "Close", "data-bs-dismiss" => "modal", type: "button"}
      .modal-body
        = form_with model: @appointment, url: dispute_analysts_case_appointments_path(@appointment, case_id: @case.id), method: :post do |form|
          = form.label :date
          = form.date_field :date, class: 'form-control'
          %br/
          = form.label :start_time
          = form.time_field :start_time, class: 'form-control'
          %br/
          = form.label :end_time
          = form.time_field :end_time, class: 'form-control'
          = form.hidden_field :status, value: 'scheduled'
          = form.hidden_field :case_id, value: @case.id
          = form.hidden_field :scheduler_id, value: current_dispute_analyst.id
          = form.hidden_field :schedulee_id, value: @case.user_id
          %br/
          .modal-footer
            %button.btn.btn-secondary{"data-bs-dismiss" => "modal", type: "button"} Close
            = form.submit "Schedule Appointment", class: 'btn btn-primary'
